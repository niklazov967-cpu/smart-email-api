# ‚úÖ –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞: –ö–æ–º–ø–∞–Ω–∏–∏ –±–µ–∑ —Å–∞–π—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –æ—á–µ—Ä–µ–¥—å Stage 2

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1Ô∏è‚É£ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–±—Ä–æ—Å–∞ Stage 2
**–§–∞–π–ª:** `scripts/reset-stage2-for-companies-without-website.js`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –∫–æ–º–ø–∞–Ω–∏–∏ –±–µ–∑ —Å–∞–π—Ç–∞
- –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Stage 2
- –î–æ–±–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–∞–Ω–∏–∏ –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –ø–æ–∏—Å–∫ —Å–∞–π—Ç–∞

### 2Ô∏è‚É£ –í—ã–ø–æ–ª–Ω–µ–Ω —Å–±—Ä–æ—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ **50 –∫–æ–º–ø–∞–Ω–∏–π** –Ω–∞–π–¥–µ–Ω–æ –±–µ–∑ —Å–∞–π—Ç–∞
- ‚úÖ **50 –∑–∞–ø–∏—Å–µ–π** –æ–±–Ω–æ–≤–ª–µ–Ω–æ
- ‚úÖ –í—Å–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –æ—á–µ—Ä–µ–¥—å Stage 2

**–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:**
- 34 –∫–æ–º–ø–∞–Ω–∏–∏ —Å `stage2_status = 'completed'` (Stage 2 –±—ã–ª, –Ω–æ —Å–∞–π—Ç –Ω–µ –Ω–∞—à–µ–ª—Å—è)
- 16 –∫–æ–º–ø–∞–Ω–∏–π —Å `stage2_status = 'failed'` (Stage 2 –ø—Ä–æ–≤–∞–ª–∏–ª—Å—è)

### 3Ô∏è‚É£ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

–î–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ –±–µ–∑ —Å–∞–π—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:
```javascript
{
  stage2_status: null,        // ‚úÖ NULL = –≥–æ—Ç–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
  current_stage: 1,            // ‚úÖ Stage 1 –∑–∞–≤–µ—Ä—à–µ–Ω, –≥–æ—Ç–æ–≤ –¥–ª—è Stage 2
  website_status: null,        // –û—á–∏—â–µ–Ω —Å—Ç–∞—Ä—ã–π —Å—Ç–∞—Ç—É—Å
  stage2_raw_data: null,       // –û—á–∏—â–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
  updated_at: NOW()
}
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –¢–µ–ø–µ—Ä—å –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ:

**–ë–ª–æ–∫ "Stage 2: –ü–æ–∏—Å–∫ —Å–∞–π—Ç–æ–≤"** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- **50 –∫–æ–º–ø–∞–Ω–∏–π –±–µ–∑ —Å–∞–π—Ç–∞** –≥–æ—Ç–æ–≤—ã—Ö –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ö–Ω–æ–ø–∫–∞ **"–û–±—Ä–∞–±–æ—Ç–∞—Ç—å"** –∞–∫—Ç–∏–≤–Ω–∞
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø–æ–∏—Å–∫ —Å–∞–π—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö 50 –∫–æ–º–ø–∞–Ω–∏–π

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### 1. SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞
**–§–∞–π–ª:** `database/reset-stage2-queue.sql`
- –ú–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ Supabase SQL Editor
- –°–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –°–æ–¥–µ—Ä–∂–∏—Ç UPDATE –∑–∞–ø—Ä–æ—Å (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω)

### 2. Node.js —Å–∫—Ä–∏–ø—Ç
**–§–∞–π–ª:** `scripts/reset-stage2-for-companies-without-website.js`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# Dry-run (–ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
node scripts/reset-stage2-for-companies-without-website.js --dry-run

# –†–µ–∞–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
node scripts/reset-stage2-for-companies-without-website.js
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–∏ Stage 2

### SQL –∑–∞–ø—Ä–æ—Å:
```sql
SELECT 
  company_name,
  stage2_status,
  current_stage,
  website
FROM pending_companies
WHERE stage2_status IS NULL
  AND current_stage >= 1
  AND (website IS NULL OR website = '');
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** 50 –∑–∞–ø–∏—Å–µ–π

## ‚úÖ Commit & Deploy

- ‚úÖ –ö–æ–º–º–∏—Ç: `f7546d4` - "feat: Reset Stage 2 for companies without website - v2.7.0"
- ‚úÖ Push –≤ main
- ‚úÖ Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –ö–æ–º–ø–∞–Ω–∏–π –±–µ–∑ —Å–∞–π—Ç–∞ –Ω–∞–π–¥–µ–Ω–æ | 50 |
| –ö–æ–º–ø–∞–Ω–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω–æ | 50 |
| –° `stage2_status = 'completed'` | 34 |
| –° `stage2_status = 'failed'` | 16 |
| –ì–æ—Ç–æ–≤—ã –¥–ª—è Stage 2 | 50 |
| –í–µ—Ä—Å–∏—è | v2.7.0 |

---

**–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 2025-11-30  
**–í–µ—Ä—Å–∏—è:** v2.7.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

