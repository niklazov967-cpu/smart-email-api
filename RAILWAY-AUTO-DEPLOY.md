# ๐ ะะฐัััะพะนะบะฐ ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะดะตะฟะปะพั ะฝะฐ Railway

## โ ะขะตะบััะธะน ััะฐััั

ะะฐัะต ะฟัะธะปะพะถะตะฝะธะต ัะถะต ัะฐะฑะพัะฐะตั:
- **URL:** https://smart-email-api-production.up.railway.app
- **ะกัะฐััั:** โ ะะฝะปะฐะนะฝ
- **ะะตััะธั:** 1.3.0

---

## ๐ ะะฐัััะพะนะบะฐ ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะดะตะฟะปะพั ะฟัะธ git push

### ะกะฟะพัะพะฑ 1: ะงะตัะตะท Railway Dashboard (ะะตะบะพะผะตะฝะดัะตััั)

#### ะจะฐะณ 1: ะัะบัะพะนัะต ะฟัะพะตะบั
```bash
# ะะปะธ ะพัะบัะพะนัะต ะฒัััะฝัั
open https://railway.app/project/d51a9b81-1256-4083-bc94-2d895e79db57
```

#### ะจะฐะณ 2: ะะพะดะบะปััะธัะต GitHub ัะตะฟะพะทะธัะพัะธะน

1. ะ Railway Dashboard ะฒัะฑะตัะธัะต ะฒะฐั ัะตัะฒะธั
2. ะะตัะตะนะดะธัะต ะฒ **Settings** (โ๏ธ)
3. ะ ัะฐะทะดะตะปะต **Source** ะฝะฐะถะผะธัะต **Connect Repo**
4. ะัะฑะตัะธัะต ะฒะฐั GitHub ะฐะบะบะฐัะฝั
5. ะัะฑะตัะธัะต ัะตะฟะพะทะธัะพัะธะน ะฟัะพะตะบัะฐ
6. ะฃะบะฐะถะธัะต ะฒะตัะบั: **main** (ะธะปะธ **master**)

#### ะจะฐะณ 3: ะะฐัััะพะนัะต ะฐะฒัะพะดะตะฟะปะพะน

ะ Settings โ Deploy:
- โ **Enable Auto Deploy** - ะฒะบะปััะธัั
- โ **Deploy on push to main** - ะฒะบะปััะธัั
- Root Directory: `/` (ะพััะฐะฒะธัั ะฟะพ ัะผะพะปัะฐะฝะธั)
- Build Command: (ะพััะฐะฒะธัั ะฟััััะผ, ะฑัะดะตั ะธัะฟะพะปัะทะพะฒะฐะฝ npm install)
- Start Command: `node src/app-simple.js`

#### ะจะฐะณ 4: ะะฐัััะพะนัะต Watch Paths (ะพะฟัะธะพะฝะฐะปัะฝะพ)

ะัะปะธ ัะพัะธัะต ะดะตะฟะปะพะธัั ัะพะปัะบะพ ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ ะพะฟัะตะดะตะปะตะฝะฝัั ัะฐะนะปะพะฒ:
- `src/**`
- `public/**`
- `package.json`
- `railway.json`

---

### ะกะฟะพัะพะฑ 2: ะงะตัะตะท GitHub Actions (ะะปััะตัะฝะฐัะธะฒะฐ)

ะัะปะธ ัะพัะธัะต ะฑะพะปััะต ะบะพะฝััะพะปั, ะผะพะถะฝะพ ะฝะฐัััะพะธัั ัะตัะตะท GitHub Actions:

1. ะกะพะทะดะฐะนัะต ัะฐะนะป `.github/workflows/railway-deploy.yml`:

```yaml
name: Deploy to Railway

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Install Railway CLI
        run: npm i -g @railway/cli
      
      - name: Deploy to Railway
        run: railway up --service smart-email-api
        env:
          RAILWAY_TOKEN: ${{ secrets.RAILWAY_TOKEN }}
```

2. ะะพะปััะธัะต Railway Token:
```bash
railway whoami
# ะกะบะพะฟะธััะนัะต ัะพะบะตะฝ
```

3. ะะพะฑะฐะฒััะต ะฒ GitHub Secrets:
- ะัะบัะพะนัะต ัะตะฟะพะทะธัะพัะธะน ะฝะฐ GitHub
- Settings โ Secrets and variables โ Actions
- New repository secret
- Name: `RAILWAY_TOKEN`
- Value: (ะฒะฐั ัะพะบะตะฝ)

---

## ๐งช ะัะพะฒะตัะบะฐ ะฐะฒัะพะดะตะฟะปะพั

### ะขะตัั 1: ะะทะผะตะฝะธัะต ะฒะตััะธั

```bash
# ะะทะผะตะฝะธัะต ะฒะตััะธั ะฒ package.json
nano package.json
# ะะทะผะตะฝะธัะต "version": "1.3.0" โ "1.3.1"
```

### ะขะตัั 2: ะะฐะบะพะผะผะธัััะต ะธ ะพัะฟัะฐะฒััะต

```bash
git add package.json
git commit -m "test: ะฟัะพะฒะตัะบะฐ ะฐะฒัะพะดะตะฟะปะพั"
git push origin main
```

### ะขะตัั 3: ะัะพะฒะตัััะต ะดะตะฟะปะพะน

1. ะัะบัะพะนัะต Railway Dashboard
2. ะั ัะฒะธะดะธัะต ะฝะพะฒัะน ะดะตะฟะปะพะน ะฒ ัะฐะทะดะตะปะต **Deployments**
3. ะะพะถะดะธัะตัั ะทะฐะฒะตััะตะฝะธั (ะพะฑััะฝะพ 1-2 ะผะธะฝััั)
4. ะัะพะฒะตัััะต ะฒะตััะธั:

```bash
curl https://smart-email-api-production.up.railway.app/api | grep version
# ะะพะปะถะฝะพ ะฑััั "version": "1.3.1"
```

---

## ๐ ะะพะฝะธัะพัะธะฝะณ ะดะตะฟะปะพะตะฒ

### ะ Railway Dashboard:

**Deployments** - ะธััะพัะธั ะฒัะตั ะดะตะฟะปะพะตะฒ:
- โ ะฃัะฟะตัะฝัะต (ะทะตะปะตะฝัะต)
- โณ ะ ะฟัะพัะตััะต (ัะธะฝะธะต)
- โ ะัะธะฑะบะธ (ะบัะฐัะฝัะต)

**Logs** - ะปะพะณะธ ัะฑะพัะบะธ ะธ ะทะฐะฟััะบะฐ:
- Build logs - ะฟัะพัะตัั ัััะฐะฝะพะฒะบะธ ะทะฐะฒะธัะธะผะพััะตะน
- Deploy logs - ะทะฐะฟััะบ ะฟัะธะปะพะถะตะฝะธั
- Runtime logs - ัะฐะฑะพัะฐ ะฟัะธะปะพะถะตะฝะธั

**Metrics** - ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ:
- CPU usage
- Memory usage
- Network traffic

---

## ๐ง ะะฐัััะพะนะบะธ ะดะตะฟะปะพั

### Health Check

Railway ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะพะฒะตััะตั `/health` endpoint:
- ะะฝัะตัะฒะฐะป: 30 ัะตะบัะฝะด
- Timeout: 300 ัะตะบัะฝะด (5 ะผะธะฝัั)
- Restart policy: ON_FAILURE

ะะฐัััะพะตะฝะพ ะฒ `railway.json`:
```json
{
  "deploy": {
    "healthcheckPath": "/health",
    "healthcheckTimeout": 300,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  }
}
```

### Rollback (ะพัะบะฐั)

ะัะปะธ ััะพ-ัะพ ะฟะพัะปะพ ะฝะต ัะฐะบ:

1. ะ Railway Dashboard โ Deployments
2. ะะฐะนะดะธัะต ะฟัะตะดัะดััะธะน ััะฟะตัะฝัะน ะดะตะฟะปะพะน
3. ะะฐะถะผะธัะต **Rollback** (โฎ๏ธ)

ะะปะธ ัะตัะตะท CLI:
```bash
railway rollback
```

---

## ๐ฏ ะงัะพ ะฟัะพะธััะพะดะธั ะฟัะธ git push:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 1. git push origin main                 โ
โโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
            v
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 2. Railway ะฟะพะปััะฐะตั webhook ะพั GitHub   โ
โโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
            v
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 3. Railway ะบะปะพะฝะธััะตั ัะตะฟะพะทะธัะพัะธะน        โ
โโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
            v
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 4. npm install (ัััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน) โ
โโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
            v
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 5. Build (ะตัะปะธ ะตััั npm run build)      โ
โโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
            v
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 6. ะะฐะฟััะบ: node src/app-simple.js       โ
โโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
            v
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 7. Health check ะฝะฐ /health              โ
โโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
            โ
            v
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 8. โ ะะพะฒะฐั ะฒะตััะธั ะพะฝะปะฐะนะฝ!              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ะัะตะผั ะดะตะฟะปะพั:** ะพะฑััะฝะพ 1-3 ะผะธะฝััั

---

## ๐จ Troubleshooting

### ะะตะฟะปะพะน ะฝะต ะทะฐะฟััะบะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ

**ะัะธัะธะฝะฐ:** ะะตะฟะพะทะธัะพัะธะน ะฝะต ะฟะพะดะบะปััะตะฝ

**ะะตัะตะฝะธะต:**
1. Railway Dashboard โ Settings โ Source
2. Connect Repo
3. ะัะฑะตัะธัะต ัะตะฟะพะทะธัะพัะธะน

### ะะตะฟะปะพะน ะฟะฐะดะฐะตั ั ะพัะธะฑะบะพะน

**ะัะธัะธะฝะฐ:** ะัะธะฑะบะฐ ะฒ ะบะพะดะต ะธะปะธ ะพััััััะฒััั environment variables

**ะะตัะตะฝะธะต:**
1. ะัะพะฒะตัััะต ะปะพะณะธ ะฒ Railway Dashboard
2. ะฃะฑะตะดะธัะตัั ััะพ ะฒัะต ะฟะตัะตะผะตะฝะฝัะต ัััะฐะฝะพะฒะปะตะฝั:
   ```bash
   railway variables
   ```
3. ะัะพะฒะตัััะต ััะพ ะบะพะด ัะฐะฑะพัะฐะตั ะปะพะบะฐะปัะฝะพ:
   ```bash
   npm install
   node src/app-simple.js
   ```

### Health check ะฝะต ะฟัะพัะพะดะธั

**ะัะธัะธะฝะฐ:** ะัะธะปะพะถะตะฝะธะต ะฝะต ะพัะฒะตัะฐะตั ะฝะฐ `/health`

**ะะตัะตะฝะธะต:**
1. ะัะพะฒะตัััะต ััะพ endpoint ัััะตััะฒัะตั ะฒ `src/app-simple.js`
2. ะฃะฒะตะปะธัััะต timeout ะฒ `railway.json`
3. ะัะพะฒะตัััะต ะปะพะณะธ:
   ```bash
   railway logs
   ```

---

## ๐ก ะะตะบะพะผะตะฝะดะฐัะธะธ

### โ DO (ะะตะปะฐะนัะต):
- ะะพะผะผะธัััะต ะฝะตะฑะพะปััะธะต ะธะทะผะตะฝะตะฝะธั ัะฐััะพ
- ะขะตััะธััะนัะต ะปะพะบะฐะปัะฝะพ ะฟะตัะตะด push
- ะัะพะฒะตััะนัะต ะปะพะณะธ ะฟะพัะปะต ะบะฐะถะดะพะณะพ ะดะตะฟะปะพั
- ะกะปะตะดะธัะต ะทะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ะบัะตะดะธัะพะฒ

### โ DON'T (ะะต ะดะตะปะฐะนัะต):
- ะะต ะบะพะผะผะธัััะต `.env` ัะฐะนะปั
- ะะต ะบะพะผะผะธัััะต `node_modules`
- ะะต ะดะตะปะฐะนัะต force push ะฑะตะท ะฝะตะพะฑัะพะดะธะผะพััะธ
- ะะต ะทะฐะฑัะฒะฐะนัะต ะฟัะพ `.gitignore`

---

## ๐ฑ ะัััััะต ะบะพะผะฐะฝะดั

```bash
# ะัะบัััั ะฟัะพะตะบั ะฒ ะฑัะฐัะทะตัะต
railway open

# ะัะบัััั ะปะพะณะธ
railway logs

# ะกัะฐััั
railway status

# ะะตัะตะผะตะฝะฝัะต
railway variables

# ะะตะฟะปะพะน ะฒัััะฝัั
railway up

# ะัะบะฐั
railway rollback
```

---

## ๐ ะะพัะพะฒะพ!

ะขะตะฟะตัั ะฟัะธ ะบะฐะถะดะพะผ `git push` ะฒะฐัะต ะฟัะธะปะพะถะตะฝะธะต ะฑัะดะตั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพะฑะฝะพะฒะปััััั ะฝะฐ Railway!

**ะัะพะฒะตัััะต:** https://smart-email-api-production.up.railway.app

**ะกะปะตะดัััะธะน ัะฐะณ:** ะกะดะตะปะฐะนัะต ัะตััะพะฒัะน ะบะพะผะผะธั ะธ ัะฑะตะดะธัะตัั ััะพ ะฐะฒัะพะดะตะฟะปะพะน ัะฐะฑะพัะฐะตั! ๐

