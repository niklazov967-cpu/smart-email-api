# –°–±—Ä–æ—Å Stage 2 –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–π –±–µ–∑ —Å–∞–π—Ç–∞

## üìã –ó–∞–¥–∞—á–∞

–í–µ—Ä–Ω—É—Ç—å –≤—Å–µ –∫–æ–º–ø–∞–Ω–∏–∏ –±–µ–∑ —Å–∞–π—Ç–∞ –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –ø–æ–∏—Å–∫ —Å–∞–π—Ç–∞ (Stage 2).

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:

- **50 –∫–æ–º–ø–∞–Ω–∏–π** –±–µ–∑ —Å–∞–π—Ç–∞ –Ω–∞–π–¥–µ–Ω–æ
- **50 –∑–∞–ø–∏—Å–µ–π** –æ–±–Ω–æ–≤–ª–µ–Ω–æ
- –í—Å–µ –∫–æ–º–ø–∞–Ω–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –æ—á–µ—Ä–µ–¥—å Stage 2

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º (–¥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è):

- **34 –∫–æ–º–ø–∞–Ω–∏–∏** - `stage2_status = 'completed'` (Stage 2 –±—ã–ª –∑–∞–≤–µ—Ä—à–µ–Ω, –Ω–æ —Å–∞–π—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω)
- **16 –∫–æ–º–ø–∞–Ω–∏–π** - `stage2_status = 'failed'` (Stage 2 –ø—Ä–æ–≤–∞–ª–∏–ª—Å—è)

## üîß –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### –°–∫—Ä–∏–ø—Ç: `scripts/reset-stage2-for-companies-without-website.js`

–û–±–Ω–æ–≤–ª—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–∞–Ω–∏–π –±–µ–∑ —Å–∞–π—Ç–∞:

```javascript
{
  stage2_status: null,        // NULL = –≥–æ—Ç–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
  current_stage: 1,            // Stage 1 –∑–∞–≤–µ—Ä—à–µ–Ω, –≥–æ—Ç–æ–≤ –¥–ª—è Stage 2
  website_status: null,        // –°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ä—ã–π —Å—Ç–∞—Ç—É—Å
  stage2_raw_data: null,       // –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
  updated_at: new Date().toISOString()
}
```

### –£—Å–ª–æ–≤–∏—è –≤—ã–±–æ—Ä–∫–∏:

```sql
WHERE (website IS NULL OR website = '')
  AND current_stage >= 1
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π

1. **Â∞ºÊñØÂø´ÈÄü**
   - `stage2_status`: `completed` ‚Üí `NULL`
   - `current_stage`: `2` ‚Üí `1`

2. **ÂàÄÊüÑÁ≤æÂØÜÊú∫Ê¢∞ÊúâÈôêÂÖ¨Âè∏**
   - `stage2_status`: `failed` ‚Üí `NULL`
   - `current_stage`: `1` ‚Üí `1`

3. **‰∏úËéûÂ∏ÇÂá§Â≤óÂ§©Èºé‰∫îÈáëÂä†Â∑•Â∫ó**
   - `stage2_status`: `completed` ‚Üí `NULL`
   - `current_stage`: `2` ‚Üí `1`

...–∏ –µ—â–µ 47 –∫–æ–º–ø–∞–Ω–∏–π

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞

### Dry-run (–ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π):

```bash
node scripts/reset-stage2-for-companies-without-website.js --dry-run
```

### –†–µ–∞–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:

```bash
node scripts/reset-stage2-for-companies-without-website.js
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤ –±–ª–æ–∫–µ **"Stage 2: –ü–æ–∏—Å–∫ —Å–∞–π—Ç–æ–≤"** –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è **50 –∫–æ–º–ø–∞–Ω–∏–π** –≥–æ—Ç–æ–≤—ã—Ö –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏.

–ö–æ–º–ø–∞–Ω–∏–∏ –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É **"–û–±—Ä–∞–±–æ—Ç–∞—Ç—å"** –≤ Stage 2.

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–∏

SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```sql
-- –ö–æ–º–ø–∞–Ω–∏–∏ –≥–æ—Ç–æ–≤—ã–µ –¥–ª—è Stage 2
SELECT 
  company_name,
  stage2_status,
  current_stage,
  website
FROM pending_companies
WHERE stage2_status IS NULL
  AND current_stage >= 1
  AND (website IS NULL OR website = '');
```

## üìù –î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**2025-11-30** - 50 –∫–æ–º–ø–∞–Ω–∏–π –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –æ—á–µ—Ä–µ–¥—å Stage 2

