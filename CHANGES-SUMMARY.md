# –†–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π - –£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ email

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (ID: tags-improvement)

**–§–∞–π–ª:** `src/utils/TagExtractor.js`

**–î–æ–±–∞–≤–ª–µ–Ω–æ ~30 –Ω–æ–≤—ã—Ö —Ç–µ–≥–æ–≤:**

#### –ú–∞—Ç–µ—Ä–∏–∞–ª—ã - –ú–µ—Ç–∞–ª–ª—ã:
- –ù–µ—Ä–∂–∞–≤–µ–π–∫–∞ 304 / 316
- –ê–ª—é–º–∏–Ω–∏–µ–≤—ã–µ —Å–ø–ª–∞–≤—ã (6061, 7075)
- –ë—Ä–æ–Ω–∑–∞
- –ß—É–≥—É–Ω
- –õ–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞–ª—å
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞–ª—å
- –ù–∏–∫–µ–ª—å

#### –ú–∞—Ç–µ—Ä–∏–∞–ª—ã - –ü–ª–∞—Å—Ç–∏–∫–∏:
- –ê–ë–° –ø–ª–∞—Å—Ç–∏–∫
- –ü–í–•
- –ù–µ–π–ª–æ–Ω
- –ü–æ–ª–∏–∫–∞—Ä–±–æ–Ω–∞—Ç
- –ü–æ–ª–∏–ø—Ä–æ–ø–∏–ª–µ–Ω
- –ü–≠–≠–ö
- –î–µ–ª—Ä–∏–Ω

#### –ú–∞—Ç–µ—Ä–∏–∞–ª—ã - –ö–æ–º–ø–æ–∑–∏—Ç—ã:
- –ö–∞—Ä–±–æ–Ω
- –°—Ç–µ–∫–ª–æ–ø–ª–∞—Å—Ç–∏–∫

#### –í–∏–¥—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏:
- –¢–æ–∫–∞—Ä–Ω–æ-—Ñ—Ä–µ–∑–µ—Ä–Ω–∞—è
- –ì–ª—É–±–æ–∫–æ–µ —Å–≤–µ—Ä–ª–µ–Ω–∏–µ
- –†–µ–∑—å–±–æ—Ñ—Ä–µ–∑–µ—Ä–æ–≤–∞–Ω–∏–µ
- –•–æ–Ω–∏–Ω–≥–æ–≤–∞–Ω–∏–µ

#### –ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:
- –ì–∞–ª—å–≤–∞–Ω–∏—á–µ—Å–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- –ù–∏–∫–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- –•—Ä–æ–º–∏—Ä–æ–≤–∞–Ω–∏–µ
- –¶–∏–Ω–∫–æ–≤–∞–Ω–∏–µ
- –û–∫—Å–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü–æ—Ä–æ—à–∫–æ–≤–∞—è –ø–æ–∫—Ä–∞—Å–∫–∞
- –¢–µ—Ä–º–æ–æ–±—Ä–∞–±–æ—Ç–∫–∞

#### –¢–∏–ø—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:
- –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

**–§–∞–π–ª:** `src/stages/Stage4AnalyzeServices.js`

**–£–ª—É—á—à–µ–Ω –ø—Ä–æ–º–ø—Ç –¥–ª—è DeepSeek:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ —è–≤–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∏—Å–∫–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∏—Å–∫–∞—Ç—å –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ —Ç–µ–≥–∞–º (–≤–∏–¥—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏, –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –æ—Ç—Ä–∞—Å–ª–∏, —Ç–∏–ø—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞)

### 2. ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è email (ID: 10)

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ–ª–µ—Ñ–æ–Ω—ã –∫–∏—Ç–∞–π—Å–∫–∏—Ö –∫–æ–º–ø–∞–Ω–∏–π –ø–æ–ø–∞–¥–∞–ª–∏ –≤ –ø–æ–ª–µ email

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤–æ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö

**–§–∞–π–ª—ã:**
- `src/stages/Stage1FindCompanies.js`
- `src/stages/Stage2FindWebsites.js`
- `src/stages/Stage3AnalyzeContacts.js`

**–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è `_isValidEmail()`:**
- ‚úÖ –§–∏–ª—å—Ç—Ä—É–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω—ã (10-15 —Ü–∏—Ñ—Ä, +86, —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç email: `xxx@yyy.zzz`
- ‚úÖ –£–±–∏—Ä–∞–µ—Ç `mailto:` –ø—Ä–µ—Ñ–∏–∫—Å
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–æ–º–µ–Ω–∞ (—Ç–æ—á–∫–∞, –º–∏–Ω–∏–º—É–º 4 —Å–∏–º–≤–æ–ª–∞)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É local part (2 —Å–∏–º–≤–æ–ª–∞)
- ‚úÖ –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞–µ—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–æ–º–µ–Ω—ã (.–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è, .–∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è)

**–ü–∞—Ç—Ç–µ—Ä–Ω—ã —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤:**
```javascript
/^\+?\d{10,15}$/,                          // +8613912345678
/^\+?\d[\d\s\-().]{8,}$/,                  // +86 139 1234 5678
/^\d{3,4}[-\s]?\d{4}[-\s]?\d{4}$/,        // 139-1234-5678
/^\+?86[-\s]?\d{3,4}[-\s]?\d{4}[-\s]?\d{4}$/ // +86 139 1234 5678
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∞ –≤:**
- `Stage1`: –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞ Perplexity (—Å—Ç—Ä–æ–∫–∞ 238)
- `Stage1`: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–æ–º–µ–Ω–∞–º (—Å—Ç—Ä–æ–∫–∞ 376)
- `Stage2`: –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞ Perplexity (—Å—Ç—Ä–æ–∫–∞ 280)
- `Stage2`: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–æ–º–µ–Ω–∞–º (—Å—Ç—Ä–æ–∫–∞ 339)
- `Stage3`: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è email (—Å—Ç—Ä–æ–∫–∞ 331)

### 3. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å—á–µ—Ç—á–∏–∫–∏ –≤ Stage 1 & 3 (ID: 11)

**–§–∞–π–ª:** `src/services/QueryOrchestrator.js`

**Stage 1 (`runStage1Only`):**
```javascript
return {
  queriesProcessed: queries.length,    // –î–æ–±–∞–≤–ª–µ–Ω–æ
  companiesFound: companies.length,    // –ù–û–í–û–ï!
  companies
};
```

**Stage 3 (`runStage3Only`):**
```javascript
return {
  websitesProcessed: result.processed || 0,
  contactsFound: companiesResult.rows.length,  // –ù–û–í–û–ï!
  contacts: [...]
};
```

–¢–µ–ø–µ—Ä—å frontend —Å–º–æ–∂–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å:
- "X –ó–∞–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ"
- "X –ö–æ–º–ø–∞–Ω–∏–π –Ω–∞–π–¥–µ–Ω–æ"
- "X –°–∞–π—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ"
- "X –ö–æ–Ω—Ç–∞–∫—Ç–æ–≤ –Ω–∞–π–¥–µ–Ω–æ"

### 4. ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è generic emails (ID: 13)

**–ü—Ä–æ–±–ª–µ–º–∞:** Stage 3 –Ω–∞—Ö–æ–¥–∏–ª generic/non-useful emails (securities@, pr@, service@, noreply@) –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø—Ä–æ–¥–∞–∂

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω —Å–ø–∏—Å–æ–∫ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤ –≤–æ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö

**–§–∞–π–ª—ã:**
- `src/stages/Stage1FindCompanies.js`
- `src/stages/Stage2FindWebsites.js`
- `src/stages/Stage3AnalyzeContacts.js`

**–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã:**
```javascript
const genericPrefixes = [
  'noreply', 'no-reply', 'donotreply',
  'securities', 'ir', 'investor', 'relations',  // Investor relations
  'pr', 'press', 'media', 'news',               // PR
  'hr', 'recruitment', 'jobs', 'career',        // HR
  'legal', 'compliance', 'admin', 'webmaster',  // Admin
  'postmaster', 'hostmaster', 'abuse',          // Technical
  'marketing', 'advertising', 'promo',          // Marketing (–Ω–µ –ø—Ä—è–º—ã–µ –ø—Ä–æ–¥–∞–∂–∏)
  'support-cn', 'support-zh'                    // Generic support
];
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ emails (–ø—Ä–æ—Ö–æ–¥—è—Ç —Ñ–∏–ª—å—Ç—Ä):**
- `info@`, `sales@`, `contact@` - –ø—Ä—è–º—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã
- `service@` - —Å–µ—Ä–≤–∏—Å–Ω—ã–π –æ—Ç–¥–µ–ª (–ø–æ–ª–µ–∑–Ω–æ)
- `export@`, `international@` - —ç–∫—Å–ø–æ—Ä—Ç
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ emails (–∏–º–µ–Ω–∞ –ª—é–¥–µ–π)

**–õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
- –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ: `noreply@company.com` ‚ùå
- –° —Ç–æ—á–∫–æ–π: `noreply.team@company.com` ‚ùå
- –° –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ–º: `noreply_auto@company.com` ‚ùå
- –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ: `companynoreply@site.com` ‚úÖ (–ø—Ä–æ—Ö–æ–¥–∏—Ç)

## üîç –û—Å—Ç–∞–ª–∏—Å—å –≤ TODO:

**–í—Å–µ TODO –≤—ã–ø–æ–ª–Ω–µ–Ω—ã! ‚úÖ**

### TODO #5: Fix API endpoints returning errors ‚úÖ COMPLETED
- **–ü—Ä–æ–±–ª–µ–º–∞:** `/api/debug/data` endpoint –≤–æ–∑–≤—Ä–∞—â–∞–ª `TypeError: fetch failed`
- **–ü—Ä–∏—á–∏–Ω–∞:** `Promise.all()` –ø–∞–¥–∞–ª –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤ –æ–¥–Ω–æ–π –∏–∑ —Ç–∞–±–ª–∏—Ü
- **–†–µ—à–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–µ–Ω –Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** Endpoint —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–∞–∂–µ –µ—Å–ª–∏ –æ–¥–Ω–∞ –∏–∑ —Ç–∞–±–ª–∏—Ü –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

**–§–∞–π–ª:** `src/api/debug.js` - —É–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ `/api/debug/data`

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 8
- **–ù–æ–≤—ã—Ö —Ç–µ–≥–æ–≤:** ~30
- **–ù–æ–≤—ã—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–π:** 1 (`_isValidEmail` —Å —Ñ–∏–ª—å—Ç—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –∏ generic emails)
- **–ú–µ—Å—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏:** 5 (Stage 1, 2, 3 - –ø–∞—Ä—Å–∏–Ω–≥ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
- **–ù–æ–≤—ã—Ö return –ø–æ–ª–µ–π:** 2 (`companiesFound`, `contactsFound`)
- **Generic –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ:** 18
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ API endpoints:** 1 (`/api/debug/data`)

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–ë–æ–ª—å—à–µ —Ç–µ–≥–æ–≤ –Ω–∞ –∫–æ–º–ø–∞–Ω–∏—é** - —Ç–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –±–æ–ª—å—à–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
2. **–ù–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –≤ email** - —Å—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞–µ—Ç –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
3. **–¢–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã–µ emails** - –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã generic emails (noreply, pr, hr, etc.)
4. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—á–µ—Ç—á–∏–∫–∏** - frontend —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ—á–Ω—ã–µ —Ü–∏—Ñ—Ä—ã
5. **–ë–æ–ª—å—à–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤ —Ç–µ–≥–∞—Ö** - DeepSeek —è–≤–Ω–æ –∏—â–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—à–ª–∏ –ª–∏–Ω—Ç–µ—Ä –±–µ–∑ –æ—à–∏–±–æ–∫:
```bash
‚úÖ src/utils/TagExtractor.js
‚úÖ src/stages/Stage1FindCompanies.js
‚úÖ src/stages/Stage2FindWebsites.js
‚úÖ src/stages/Stage3AnalyzeContacts.js
‚úÖ src/stages/Stage4AnalyzeServices.js
‚úÖ src/services/QueryOrchestrator.js
```

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Stage 1 –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
   - –ù–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –≤ –ø–æ–ª–µ email
   - –°—á–µ—Ç—á–∏–∫ "–ö–æ–º–ø–∞–Ω–∏–π –Ω–∞–π–¥–µ–Ω–æ" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Stage 3:
   - Email –≤–∞–ª–∏–¥–Ω—ã–µ
   - –°—á–µ—Ç—á–∏–∫ "–ö–æ–Ω—Ç–∞–∫—Ç–æ–≤ –Ω–∞–π–¥–µ–Ω–æ" —Ä–∞–±–æ—Ç–∞–µ—Ç
   
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Stage 4:
   - –¢–µ–≥–∏ –≤–∫–ª—é—á–∞—é—Ç –º–∞—Ç–µ—Ä–∏–∞–ª—ã (–Ω–µ—Ä–∂–∞–≤–µ–π–∫–∞, –∞–ª—é–º–∏–Ω–∏–π, –ø–ª–∞—Å—Ç–∏–∫–∏)
   - –¢–µ–≥–∏ –≤–∫–ª—é—á–∞—é—Ç –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
   - –ë–æ–ª—å—à–µ —Ç–µ–≥–æ–≤ –Ω–∞ –∫–æ–º–ø–∞–Ω–∏—é (8-15 –≤–º–µ—Å—Ç–æ 3-4)

